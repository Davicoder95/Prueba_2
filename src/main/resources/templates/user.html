<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Users Management</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<h1>Users Management</h1>

<!-- Button to add a new user (Admin, Doctor, or Patient) -->
<div>
    <button onclick="window.location.href='/users/register/admin'">Create Admin</button>
    <button onclick="window.location.href='/users/register/doctor'">Create Doctor</button>
    <button onclick="window.location.href='/users/register/patient'">Create Patient</button>
</div>

<!-- Table to display the list of users -->
<h2>List of Users</h2>
<table border="1">
    <thead>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody id="user-list">
    <!-- This section will be populated dynamically using JavaScript -->
    </tbody>
</table>

<!-- Script to fetch and display users from the API -->
<script>
    // Fetch the list of users from the API
    fetch('/api/users/readAll', {
        method: 'GET',
        headers: {
            'Authorization': 'Bearer ' + localStorage.getItem('token'), // Assuming you store JWT token in localStorage
        }
    })
    .then(response => response.json())
    .then(users => {
        const userList = document.getElementById('user-list');
        users.forEach(user => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${user.id}</td>
                <td>${user.name} ${user.lastName}</td>
                <td>${user.email}</td>
                <td>${user.role}</td>
                <td>
                    <button onclick="window.location.href='/users/${user.id}'">Edit</button>
                </td>
            `;
            userList.appendChild(row);
        });
    })
    .catch(error => console.error('Error fetching users:', error));
</script>
</body>
</html>
